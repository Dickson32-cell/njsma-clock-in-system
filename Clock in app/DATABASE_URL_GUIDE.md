# Database URL Setup Guide - Step by Step

## 🎯 Understanding the Database URL

The `DATABASE_URL` is a connection string that tells your web application how to connect to your PostgreSQL database. It contains all the necessary information: username, password, server location, port, and database name.

## 📍 Step-by-Step Visual Guide

### Step 1: Create PostgreSQL Database
1. Go to your Render dashboard
2. Click "New +" button
3. Select "PostgreSQL"
4. Fill in the details:
   - **Name**: `clock-in-db`
   - **Database**: `clock_in_system` (or leave default)
   - **User**: (will be auto-generated)
   - **Region**: Choose closest to you
   - **Plan**: Free
5. Click "Create Database"

### Step 2: Find Your Database URL
After your database is created:

1. **Click on your database name** (`clock-in-db`) in the dashboard
2. **You'll see a page with connection details** that looks like this:

```
┌─────────────────────────────────────────────────────────────┐
│ clock-in-db Database                                        │
├─────────────────────────────────────────────────────────────┤
│ Status: ● Available                                         │
│                                                             │
│ Connection Details:                                         │
│                                                             │
│ Internal Database URL:                                      │
│ postgres://clock_in_user:xyz123...@dpg-abc123...          │
│                                                             │
│ External Database URL:  👈 COPY THIS ONE!                  │
│ postgres://clock_in_user:xyz123...@dpg-abc123...          │
│                                                             │
│ Host: dpg-abc123-a.oregon-postgres.render.com             │
│ Port: 5432                                                  │
│ Database: clock_in_db_xyz                                   │
│ Username: clock_in_user                                     │
│ Password: [hidden - click to reveal]                       │
└─────────────────────────────────────────────────────────────┘
```

3. **Copy the "External Database URL"** - this is the complete connection string

### Step 3: Add to Web Service Environment Variables
1. **Go to your web service** (`clock-in-system`)
2. **Click on the "Environment" tab**
3. **Add a new environment variable**:
   - **Key**: `DATABASE_URL`
   - **Value**: [Paste the External Database URL you copied]

## 🔍 What the Database URL Contains

A typical database URL looks like this:
```
postgres://username:password@hostname:port/database_name
```

Breaking it down:
- `postgres://` - Database type (PostgreSQL)
- `username` - Database user (auto-generated by Render)
- `password` - Database password (auto-generated by Render)
- `hostname` - Server address (provided by Render)
- `port` - Connection port (usually 5432 for PostgreSQL)
- `database_name` - Your specific database name

## ⚠️ Important Notes

### 1. Use External URL
- Always use the **External Database URL**, not the Internal one
- External URL allows your web service to connect from outside

### 2. Keep It Secret
- This URL contains your database password
- Never share it publicly or commit it to your code
- Only use it in environment variables

### 3. Copy Exactly
- Copy the entire URL exactly as shown
- Don't modify or change any part of it
- Include all special characters and symbols

## 🛠️ Troubleshooting

### "Can't find the URL"
- Make sure your database status shows "Available"
- Refresh the database page if you don't see connection details
- Wait a few minutes if the database was just created

### "URL doesn't work"
- Double-check you copied the complete URL
- Ensure you used the External URL, not Internal
- Verify there are no extra spaces or characters

### "Database connection failed"
- Confirm the database is running (status should be green/available)
- Check that the URL was pasted correctly in environment variables
- Try redeploying your web service after setting the environment variable

## 📋 Quick Checklist

Before proceeding to deploy:
- [ ] PostgreSQL database created and shows "Available" status
- [ ] External Database URL copied from database connection details
- [ ] Environment variable `DATABASE_URL` added to web service
- [ ] Environment variable value is the complete External Database URL
- [ ] Changes saved in web service environment settings

## 🎯 Example Environment Variable Setup

In your web service Environment tab, you should see:

```
┌─────────────────────────────────────────────────────────────┐
│ Environment Variables                                       │
├─────────────────────────────────────────────────────────────┤
│ Key: DATABASE_URL                                          │
│ Value: postgres://clock_in_user:ABC123xyz@dpg-abc123...   │
│                                                             │
│ [Add Variable] [Save Changes]                              │
└─────────────────────────────────────────────────────────────┘
```

Once this is set up correctly, your Clock-In System will be able to connect to the PostgreSQL database and store all employee data, attendance records, and leave requests.

---

*Need more help? Check the main deployment guide or contact support with specific error messages.*